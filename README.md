# mdview – 開発方針（MVP）

## Overview

* **名前**: mdview
* **目的**: ターミナルで *きれい* に *高速* に Markdown を閲覧する **閲覧専用 CLI ビューア**。
* **背景/スタンス**: 編集機能は持たず、Neovim など外部エディタとの併用を前提。まずは CLI 単体で完結させる。

---

## MVP Features（今回つくる範囲）

1. **Markdown をパースして美しく表示**
   * Glamour を使ったターミナル向け配色。見出し(H1/H2/H3)は「色のみ」で階層を強調。サイズ差は付けない。
2. **ビュー操作（スクロール）**
   * `h j k l`、`Ctrl+d`、`Ctrl+u` による移動（Vim準拠）。
3. **ファイルツリー表示（トグル）**
   * `.md`（必要に応じて `.markdown`）のみを再帰列挙して表示。MVPでは**別ファイルへの切替は行わない**。

> **除外（MVPではやらない）**
> * 別ファイルオープン/タブ切替（将来対応）
> * 編集機能（常に閲覧専用）
> * 画像表示（将来必要になれば検討）

---

## Future Features（あとで足す候補）

1. **複数ファイル表示**
   * タブ切替や画面分割などでの複数同時表示。
2. **リンクオープン**
   * `gx` でブラウザ起動（URL検出）。
3. **キーバインド拡充（Vim準拠）**
   * 例: `gg / G / 0 / $ / w / b / e / ge / f / F / t / T / ; / ,`、`/` 検索 → `n / N`、`zz / zt / zb`、ビジュアルモード（`v` / `V` / `Ctrl+v`）とヤンク（`y{motion}`）。
4. **別ファイルオープン**
   * `gf`（パスを開く）、必要に応じて `gF`（行番号付きパス）。
5. **QoL 改善**
   * 自動リロード（watch + デバウンス）、TOC 抽出＆ジャンプ、テーマ設定、システムクリップボード連携（OSC52）など。
6. **画像対応（任意）**
   * まずはオフ。将来は pixterm/chafa または kitty/iTerm/SIXEL などのオプトインを検討。

---

## 最小アーキテクチャ（メモ）

* **UI**: Bubble Tea + Bubbles(viewport) + Lip Gloss（2ペイン: ヘッダ/コンテンツ）
* **Markdown**: Goldmark → Glamour（カスタム配色）
* **FS**: `.md` 列挙（ignore: `.git`, `node_modules`, など）。
* **State**: `content`, `renderer`, `viewport`, `treeOpen`, `theme` など。

---

## 受け入れ基準（MVP 完了定義）

* `mdview <file.md>` で整形表示され、`j/k` と `Ctrl+d/u` でスクロールできる。
* `mdview <dir>` で左側にツリーが表示され、`t` でトグルできる（**切替はしない**）。
* 端末リサイズ時に折り返しが崩れず再計算される。
* 見出しやリスト・コードブロックの配色が適切に機能する。

---

## リリース時のタグライン（案）

> **mdview** — A fast and beautiful Markdown viewer for your terminal.

---

## TODO
- 背景色を作って透過の場合にも見やすくする？
- Mac/Linux/WindowsでそれぞれOpen系が違ったりするからそれをDIできるようにする（自分以外の開発者にやってもらえるように…）
